version: 2

models:
  - name: dim_campaign
    description: "SCD2 dimension capturing campaign level attributes and geo enrichment."
    columns:
      - name: source_platform
        tests:
          - not_null
      - name: ad_account_id
        tests:
          - not_null
      - name: campaign_id
        tests:
          - not_null
      - name: parish_code
      - name: valid_from
        tests:
          - not_null
      - name: valid_to
      - name: is_current
  - name: dim_adset
    description: "SCD2 dimension for ad sets/ad groups mapped back to campaigns and locations."
    columns:
      - name: source_platform
      - name: ad_account_id
      - name: adset_id
        tests:
          - not_null
      - name: campaign_id
      - name: parish_code
      - name: valid_from
      - name: valid_to
  - name: dim_ad
    description: "SCD2 dimension for creatives with ad set, campaign, and geo attributes."
    columns:
      - name: source_platform
      - name: ad_account_id
      - name: ad_id
        tests:
          - not_null
      - name: adset_id
      - name: campaign_id
      - name: parish_code
      - name: valid_from
  - name: dim_geo
    description: "Static lookup table mapping Jamaican parishes to geographic metadata."
    columns:
      - name: parish_code
        tests:
          - not_null
          - unique
      - name: parish_name
      - name: region_name
  - name: fct_ad_performance
    description: "Daily fact table for spend and performance metrics across platforms."
    columns:
      - name: date_day
        tests:
          - not_null
      - name: source_platform
      - name: spend
      - name: impressions
      - name: ctr
      - name: conversion_rate
      - name: roas
  - name: vw_campaign_daily
    description: "Aggregated daily campaign metrics joined to current campaign attributes."
    columns:
      - name: date_day
        tests:
          - not_null
      - name: campaign_id
      - name: spend
      - name: ctr
      - name: roas
      - name: cpm
  - name: vw_creative_daily
    description: "Aggregated daily creative metrics with cost efficiency fields for dashboards."
    columns:
      - name: date_day
      - name: ad_id
      - name: cost_per_click
      - name: roas
      - name: cpm
  - name: vw_pacing
    description: "Account level pacing view with cumulative and trailing spend indicators."
    columns:
      - name: date_day
      - name: ad_account_id
      - name: cumulative_spend
      - name: roas
      - name: cpm
